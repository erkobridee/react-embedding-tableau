import{a as n,j as e,F as y}from"./index-db37379d.js";import{r as b}from"./vendor-8535c4d4.js";import{s as I}from"./slugify-7e606d19.js";import{T as N,P as k,a as R}from"./PublicTableauInfoFooter-eb0c708e.js";import{B as D}from"./Button-ed5883a6.js";import"./index-c9c2052b.js";import"./RoutesContent-85203810.js";import"./TailwindTypography-97862c7d.js";const x="https://public.tableau.com/views/RegionalSampleWorkbook/Storms",i={ACTIVE:"active",DISABLED:"disabled",PROCESSING:"processing"},U=t=>I(t,{lower:!0,remove:/[*+~.()'"!:@]/g}),B=t=>{const o=t.columns.map(({fieldName:a,dataType:s})=>({fieldId:U(a),fieldName:a,dataType:s}));return t.data.map(a=>o.map((s,p)=>({...s,value:a[p].nativeValue})))},G=()=>{const t=b.useRef(null),[o,c]=b.useState(i.DISABLED),[a,s]=b.useState([]),p=l=>{c(l!==R.READY?i.DISABLED:i.ACTIVE)},S=()=>{s([])},v=async()=>{const l=t.current;if(!l)return;const d=l.workbook.activeSheet;if(d.sheetType!=="dashboard")return;const r=d.worksheets.find(T=>T.name==="Storm Map Sheet");if(!r)return;c(i.PROCESSING);const m=await r.getUnderlyingTablesAsync(),u={maxRows:10,ignoreAliases:!1,ignoreSelection:!0,includeAllColumns:!1},w=await r.getUnderlyingTableDataAsync(m[0].id,u),A=B(w);s(A),setTimeout(()=>{c(i.ACTIVE)},300)},h=o!==i.ACTIVE,C=h||a.length>0,E=h||a.length===0,f=a.length;return n("div",{className:"flex flex-col items-center w-full space-y-3",children:[n("div",{className:"flex gap-3 items-center",children:[e("span",{className:"font-bold",children:"ui status:"}),e("span",{children:o})]}),n("div",{className:"flex space-x-3 items-center",children:[e(D,{disabled:C,onClick:v,children:"Get Data"}),e(D,{disabled:E,onClick:S,children:"Clear Data"})]}),e("div",{className:"flex justify-center h-[650px] min-w-[800px]",children:e(N,{ref:t,viewUrl:x,onStatusChange:p})}),e(k,{tableauUrl:x,label:"Get Data",url:"https://tableau.github.io/embedding-api-v3-samples/getData.html",code:"https://github.com/tableau/embedding-api-v3-samples/blob/main/getData.html"}),f>0?n(y,{children:[e("hr",{className:"border-divider my-4 sm:mx-auto lg:my-6 w-full"}),n("div",{className:"flex space-x-3 items-center font-bold",children:["Data Selected ( ",f," )"]}),e("div",{className:"flex gap-3 items-center flex-wrap",children:a.map((l,d)=>e("div",{className:"p-2 flex flex-col space-y-2 border rounded-md",children:l.map(({fieldId:g,fieldName:r,value:m,dataType:u})=>n("div",{className:"flex gap-3",children:[e("span",{className:"font-bold",children:`${r}:`}),e("span",{children:u==="date-time"?`${new Date(`${m}`).toISOString()}`:`${m}`}),e("span",{children:`( ${u} )`})]},g))},d))})]}):null]})},z=G;export{G as PublicGetDataExample,z as default};
