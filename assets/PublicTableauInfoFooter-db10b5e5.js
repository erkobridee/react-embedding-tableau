import{a as r,F as d,j as e,E as c}from"./index-b324429e.js";import{r as i,c as R}from"./vendor-50e95b69.js";import{u as L}from"./index-ae41a2f3.js";const D=(s,n)=>{const a=i.useRef(!0);i.useEffect(()=>{a.current?a.current=!1:s()},n)},h={CustomMarkContextMenuEvent:"custommarkcontextmenu",CustomViewLoaded:"customviewloaded",CustomViewRemoved:"customviewremoved",CustomViewSaved:"customviewsaved",CustomViewSetDefault:"customviewsetdefault",EditButtonClicked:"editbuttonclicked",EditInDesktopButtonClicked:"editindesktopbuttonclicked",FilterChanged:"filterchanged",FirstInteractive:"firstinteractive",FirstVizSizeKnown:"firstvizsizeknown",MarkSelectionChanged:"markselectionchanged",ParameterChanged:"parameterchanged",StoryPointSwitched:"storypointswitched",ToolbarStateChanged:"toolbarstatechanged",TabSwitched:"tabswitched",UrlAction:"urlaction",WorkbookPublished:"workbookpublished",WorkbookPublishedAs:"workbookpublishedas",WorkbookReadyToClose:"workbookreadytoclose"},M=({viewUrl:s,className:n,id:a="tableauViz",instanceIdToClone:l,token:v,toolbar:f,debug:p=!1,hideTabs:k=!1,device:g,filters:w=[]},T)=>{const[u,b]=i.useState(!0),[E,y]=i.useState(s),o=i.useRef(null);i.useImperativeHandle(T,()=>o.current?o.current:{});const{debug:C,token:x,device:z,toolbar:N,hideTabs:S,baseClassName:F}=L(),m=async()=>{setTimeout(()=>{b(!1)},150)};i.useEffect(()=>{const t=o.current;if(t)return t==null||t.addEventListener(h.FirstInteractive,m),()=>{t==null||t.removeEventListener(h.FirstInteractive,m)}},[o.current]),D(()=>{o.current&&(b(!0),setTimeout(()=>{y(s)},150))},[s]);const V=!!(window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches);return r(d,{children:[e("div",{style:{position:"absolute",opacity:u?1:0},children:"Loading..."}),e("tableau-viz",{ref:o,style:{opacity:u?0:1},src:E,class:R(F,n),id:a,instanceIdToClone:l,device:g||z,toolbar:f||N,token:v||x,debug:p||C?!0:void 0,"hide-tabs":k||S?!0:void 0,"touch-optimize":V?!0:void 0,children:w.map((t,I)=>e("viz-filter",{...t},I))})]})},P=i.forwardRef(M);P.displayName="TableauEmbed";const U=({tableauUrl:s,label:n,url:a,code:l})=>r(d,{children:[r("div",{className:"flex space-x-3",children:[e("div",{className:"font-bold",children:"Public Tableau:"}),e(c,{className:"hover:underline",href:s})]}),r("div",{className:"flex space-x-1",children:[e(c,{className:"hover:underline",href:"https://github.com/tableau",children:"[GitHub] tableau"}),e("span",{children:"/"}),e(c,{className:"hover:underline",href:"https://github.com/tableau/embedding-api-v3-samples",children:"embedding-api-v3-samples"}),a?r(d,{children:[e("span",{children:"/"}),e(c,{className:"hover:underline",href:a,children:n||a}),l?r(d,{children:[e("span",{children:"-"}),e(c,{className:"hover:underline",href:l,children:"code"})]}):null]}):null]})]});export{U as P,P as T};
