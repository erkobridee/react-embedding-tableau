import{j as e,F as u,a as r,E as l}from"./index-cb6539ff.js";import{r as i,c as M}from"./vendor-50e95b69.js";import{u as P}from"./index-b22b470f.js";const H=(s,n)=>{const a=i.useRef(!0);i.useEffect(()=>{a.current?a.current=!1:s()},n)},f={CustomMarkContextMenuEvent:"custommarkcontextmenu",CustomViewLoaded:"customviewloaded",CustomViewRemoved:"customviewremoved",CustomViewSaved:"customviewsaved",CustomViewSetDefault:"customviewsetdefault",EditButtonClicked:"editbuttonclicked",EditInDesktopButtonClicked:"editindesktopbuttonclicked",FilterChanged:"filterchanged",FirstInteractive:"firstinteractive",FirstVizSizeKnown:"firstvizsizeknown",MarkSelectionChanged:"markselectionchanged",ParameterChanged:"parameterchanged",StoryPointSwitched:"storypointswitched",ToolbarStateChanged:"toolbarstatechanged",TabSwitched:"tabswitched",UrlAction:"urlaction",WorkbookPublished:"workbookpublished",WorkbookPublishedAs:"workbookpublishedas",WorkbookReadyToClose:"workbookreadytoclose"},j=({viewUrl:s,className:n,id:a="tableauViz",instanceIdToClone:c,token:p,toolbar:k,debug:g=!1,hideTabs:w=!1,device:T,filters:y=[],loading:d},E)=>{const[b,m]=i.useState(!0),[C,x]=i.useState(s),o=i.useRef(null);i.useImperativeHandle(E,()=>o.current?o.current:{});const{debug:z,token:N,device:S,toolbar:V,hideTabs:F,loading:I,baseClassName:R}=P(),h=async()=>{setTimeout(()=>{m(!1)},300)};i.useEffect(()=>{const t=o.current;if(t)return t==null||t.addEventListener(f.FirstInteractive,h),()=>{t==null||t.removeEventListener(f.FirstInteractive,h)}},[o.current]),H(()=>{o.current&&(m(!0),setTimeout(()=>{x(s)},150))},[s]);const L=!!(window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches),v=e("tableau-viz",{ref:o,style:{opacity:b?0:1},src:C,class:M(R,n),id:a,instanceIdToClone:c,device:T||S,toolbar:k||V,token:p||N,debug:g||z?!0:void 0,"hide-tabs":w||F?!0:void 0,"touch-optimize":L?!0:void 0,children:y.map((t,D)=>e("viz-filter",{...t},D))});return d=d||I,d?r("div",{style:{display:"flex",position:"relative"},children:[e("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,opacity:b?1:0},children:d}),v]}):e(u,{children:v})},O=i.forwardRef(j);O.displayName="TableauEmbed";const B=({tableauUrl:s,label:n,url:a,code:c})=>r(u,{children:[r("div",{className:"flex space-x-3",children:[e("div",{className:"font-bold",children:"Public Tableau:"}),e(l,{className:"hover:underline",href:s})]}),r("div",{className:"flex space-x-1",children:[e(l,{className:"hover:underline",href:"https://github.com/tableau",children:"[GitHub] tableau"}),e("span",{children:"/"}),e(l,{className:"hover:underline",href:"https://github.com/tableau/embedding-api-v3-samples",children:"embedding-api-v3-samples"}),a?r(u,{children:[e("span",{children:"/"}),e(l,{className:"hover:underline",href:a,children:n||a}),c?r(u,{children:[e("span",{children:"-"}),e(l,{className:"hover:underline",href:c,children:"code"})]}):null]}):null]})]});export{B as P,O as T};
