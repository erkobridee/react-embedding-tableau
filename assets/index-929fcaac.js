import{a as i,j as a}from"./index-7b732661.js";import{r as s}from"./vendor-ea4735f2.js";import{b as L}from"./buildNumbersRangeArray-48c469db.js";import{F}from"./FilterUpdateType-b92c7746.js";import{T as P,P as j,a as U}from"./PublicTableauInfoFooter-c9ab62c5.js";import{B as _}from"./Button-47662b77.js";import{I as V}from"./InputRangeField-0809662c.js";import"./index-7e540b80.js";import"./RoutesContent-6c394305.js";import"./TailwindTypography-00602b64.js";const v="https://public.tableau.com/views/AnimationDashboard_15616567350970/Sheet1",n={ACTIVE:"active",DISABLED:"disabled",PROCESSING:"processing"},r={min:500,max:5e3},d=1e3,l=L(1960,2011),Y=l[l.length-1],O="w-36",k=()=>{const o=s.useRef(),p=s.useRef(null),[c,m]=s.useState(n.DISABLED),f=s.useRef(),[E,h]=s.useState(d),[b,I]=s.useState(d),A=s.useRef(d),g=async()=>{const t=p.current;if(!t)return;if(o.current)return o.current;const e=await t.workbook.activateSheetAsync("Sheet 1");return o.current=e,e},x=async(t,e)=>{t&&(e=e??await g(),e&&await e.applyFilterAsync("Year",[`${t}`],F.Replace))},R=async t=>{const e=t!==U.READY?n.DISABLED:n.ACTIVE;m(e)},N=t=>{const{valueAsNumber:e}=t.currentTarget;h(e)},C=t=>{const{valueAsNumber:e}=t.target,u=e<r.min?r.min:e>r.max?r.max:e;h(u),I(u),A.current=u},S=()=>{const t=f.current;t&&(clearInterval(t),m(n.ACTIVE))},w=async()=>{m(n.PROCESSING);const t=await g();let e=l[0];f.current=setInterval(async()=>{await x(e,t),e===Y&&S(),e++},A.current)},y=(t=!1)=>()=>{if(t){S();return}w()},B=c!==n.ACTIVE,D=c===n.DISABLED,T=c===n.PROCESSING;return i("div",{className:"flex flex-col items-center w-full space-y-3",children:[i("div",{className:"flex gap-3 items-center",children:[a("span",{className:"font-bold",children:"ui status:"})," ",a("span",{children:c})]}),i("div",{className:"flex flex-col gap-3 items-center",children:[a(V,{label:"Animation Timer",name:"width",value:E,onChange:N,onBlur:C,className:O,min:r.min,max:r.max,step:10,disabled:B}),i("div",{className:"flex gap-3 items-center",children:[a("span",{children:`Timer value in use: ${b} (ms)`}),a(_,{disabled:D,onClick:y(T),children:T?"Stop":"Start"})]})]}),a("div",{className:"flex justify-center h-[600px] min-w-[800px]",children:a(P,{ref:p,viewUrl:v,onStatusChange:R,filters:[{field:"Year",value:`${l[0]}`}]})}),a("div",{className:"flex gap-3 items-center",children:"Years range: 1960 until 2011"}),a("div",{className:"flex gap-3 items-center",children:i("div",{children:[a("span",{className:"font-bold",children:"NOTE:"})," ",a("span",{children:"This"})," ",a("span",{className:"italic",children:"animation"})," ",i("span",{children:["runs by incremeting the Year filter on the defined animation timer ("," ",`${b} ms`," )."]})]})}),a(j,{tableauUrl:v,label:"Animation",githubProfileAccount:"andre347",githubProfileAccountUrl:"https://github.com/andre347",githubRepo:"tableau-react-jsapi",githubRepoUrl:"https://github.com/andre347/tableau-react-jsapi",url:"https://react-tableau-jsapi.vercel.app/animation",code:"https://github.com/andre347/tableau-react-jsapi/blob/master/src/components/Animation.js"})]})},X=k;export{k as PublicAnimationExample,X as default};
