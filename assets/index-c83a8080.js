import{a as s,j as a}from"./index-7b732661.js";import{r as n}from"./vendor-ea4735f2.js";import{b as r,T as A,P as w,a as I}from"./PublicTableauInfoFooter-c9ab62c5.js";import{B as b}from"./Button-47662b77.js";import"./index-7e540b80.js";import"./RoutesContent-6c394305.js";import"./TailwindTypography-00602b64.js";const k={Add:"select-add",Remove:"select-remove",Replace:"select-replace"},N="https://public.tableau.com/views/RegionalSampleWorkbook/College",t={ACTIVE:"active",DISABLED:"disabled",PROCESSING:"processing"},o={Engineering:"engineering",Business:"business"},M=()=>{const d=n.useRef(null),[g,l]=n.useState(t.DISABLED),[u,p]=n.useState(!1),[x,f]=n.useState(!1),S=()=>{const e=d.current;if(e)return e.workbook.activeSheet},T=()=>{l(t.ACTIVE)},y=e=>{l(e!==I.READY?t.DISABLED:t.ACTIVE)},v=async e=>{console.log("onTableauEmbedFilterChangeHandler ",e)},E=async e=>{T();const i=await e.detail.getMarksAsync();console.log("onTableauEmbedMarkSelectionChangeHandler ",{marksCollection:i})};n.useEffect(()=>{const e=d.current;if(e)return e.addEventListener(r.FilterChanged,v),e.addEventListener(r.MarkSelectionChanged,E),()=>{e.removeEventListener(r.FilterChanged,v),e.removeEventListener(r.MarkSelectionChanged,E)}},[]);const B=async()=>{const e=S();e&&(l(t.PROCESSING),await e.clearSelectedMarksAsync(),p(!1),f(!1))},C=e=>async()=>{const i=S();if(!i)return;let c=[],h;switch(e){case o.Engineering:h=k.Replace,c=[{fieldName:"College",value:"Engineering"}],p(!0);break;case o.Business:h=k.Add,c=[{fieldName:"College",value:"Business"}],f(!0);break}c.length!==0&&(l(t.PROCESSING),await i.selectMarksByValueAsync(c,h))},m=[`${t.DISABLED}`,`${t.PROCESSING}`].includes(g);return s("div",{className:"flex flex-col items-center w-full space-y-3",children:[a("div",{className:"flex space-x-3 items-center",children:s("span",{children:[a("strong",{children:"ui status: "})," ",g]})}),s("div",{className:"flex space-x-3 items-center",children:[a("span",{className:"font-bold",children:"College:"}),a(b,{disabled:m||u,onClick:C(o.Engineering),children:"Select Engineering"}),a(b,{disabled:m||!u||x,onClick:C(o.Business),children:"Add Business to Selection"}),a(b,{disabled:m||!u,onClick:B,children:"Clear Selection"})]}),a("div",{className:"flex justify-center h-[600px] min-w-[800px]",children:a(A,{ref:d,viewUrl:N,onStatusChange:y})}),a(w,{tableauUrl:N,label:"Select Marks",url:"https://tableau.github.io/embedding-api-v3-samples/selectMarks.html",code:"https://github.com/tableau/embedding-api-v3-samples/blob/main/selectMarks.html"}),a("hr",{className:"border-divider my-4 sm:mx-auto lg:my-6 w-full"}),s("div",{className:"flex space-x-3 items-center",children:[a("span",{className:"font-bold",children:"Note:"}),a("span",{children:"there is no event that informs when the user click on a chart legend item"})]}),s("ul",{children:[a("span",{className:"text-lg",children:"Useful events:"}),s("li",{className:"flex gap-2",children:[a("span",{className:"font-bold",children:"First Interactive"}),a("span",{className:"italic",children:"Fired when a viz first becomes interactive"})]}),s("li",{className:"flex gap-2",children:[a("span",{className:"font-bold",children:"Filter Changed"}),a("span",{className:"italic",children:"Raised when any filter has changed state. You can use this event type with TableauViz objects."})]}),s("li",{className:"flex gap-2",children:[a("span",{className:"font-bold",children:"Mark Selection Changed"}),a("span",{className:"italic",children:"The selected marks on a visualization have changed. You can use this event type with TableauViz objects."})]})]})]})},H=M;export{M as PublicSelectMarksExample,H as default};
