import{a as r,j as a}from"./index-4220aa41.js";import{r as c}from"./vendor-8535c4d4.js";import{F as L}from"./FilterUpdateType-b92c7746.js";import{T as P,P as j,a as F}from"./PublicTableauInfoFooter-a0e401b0.js";import{B as U}from"./Button-7330aa3f.js";import{I as _}from"./Input-0e56c61f.js";import"./index-2a80daf0.js";import"./RoutesContent-a1e5c9f3.js";import"./TailwindTypography-09bc505e.js";const T="https://public.tableau.com/views/AnimationDashboard_15616567350970/Sheet1",n={ACTIVE:"active",DISABLED:"disabled",PROCESSING:"processing"},s={min:500,max:5e3},p=1e3,V=(l=0,m=10,i=1)=>Array.from(Array.from(Array(Math.ceil((m-l+1)/i)).keys()),o=>l+o*i),u=V(1960,2011),Y=u[u.length-1],$="w-36",k=()=>{const l=c.useRef(),m=c.useRef(null),[i,o]=c.useState(n.DISABLED),h=c.useRef(),[v,f]=c.useState(p),[b,E]=c.useState(p),A=c.useRef(p),g=async()=>{const t=m.current;if(!t)return;if(l.current)return l.current;const e=await t.workbook.activateSheetAsync("Sheet 1");return l.current=e,e},I=async(t,e)=>{t&&(e=e??await g(),e&&await e.applyFilterAsync("Year",[`${t}`],L.Replace))},N=async t=>{const e=t!==F.READY?n.DISABLED:n.ACTIVE;o(e)},R=t=>{const{valueAsNumber:e}=t.currentTarget;f(e)},y=t=>{const{valueAsNumber:e}=t.target,d=e<s.min?s.min:e>s.max?s.max:e;f(d),E(d),A.current=d},x=()=>{const t=h.current;t&&(clearInterval(t),o(n.ACTIVE))},w=async()=>{o(n.PROCESSING);const t=await g();let e=u[0];h.current=setInterval(async()=>{await I(e,t),e===Y&&x(),e++},A.current)},C=(t=!1)=>()=>{if(t){x();return}w()},B=i!==n.ACTIVE,D=i===n.DISABLED,S=i===n.PROCESSING;return r("div",{className:"flex flex-col items-center w-full space-y-3",children:[r("div",{className:"flex gap-3 items-center",children:[a("span",{className:"font-bold",children:"ui status:"})," ",a("span",{children:i})]}),r("div",{className:"flex flex-col gap-3 items-center",children:[r("div",{className:"flex gap-3 items-center",children:[a("span",{className:"font-bold w-30 text-right",children:"Animation Timer"}),a(_,{type:"number",name:"width",value:v,onChange:R,onBlur:y,className:$,min:s.min,max:s.max,step:10,disabled:B}),a("span",{className:"text-sm",children:"Limits"}),a("span",{className:"text-sm italic",children:`min: ${s.min} and max: ${s.max}`})]}),r("div",{className:"flex gap-3 items-center",children:[a("span",{children:`Timer value in use: ${b} (ms)`}),a(U,{disabled:D,onClick:C(S),children:S?"Stop":"Start"})]})]}),a("div",{className:"flex justify-center h-[600px] min-w-[800px]",children:a(P,{ref:m,viewUrl:T,onStatusChange:N,filters:[{field:"Year",value:`${u[0]}`}]})}),a("div",{className:"flex gap-3 items-center",children:"Years range: 1960 until 2011"}),a("div",{className:"flex gap-3 items-center",children:r("div",{children:[a("span",{className:"font-bold",children:"NOTE:"})," ",a("span",{children:"This"})," ",a("span",{className:"italic",children:"animation"})," ",r("span",{children:["runs by incremeting the Year filter on the defined animation timer ("," ",`${b} ms`," )."]})]})}),a(j,{tableauUrl:T,label:"Animation",githubProfileAccount:"andre347",githubProfileAccountUrl:"https://github.com/andre347",githubRepo:"tableau-react-jsapi",githubRepoUrl:"https://github.com/andre347/tableau-react-jsapi",url:"https://react-tableau-jsapi.vercel.app/animation",code:"https://github.com/andre347/tableau-react-jsapi/blob/master/src/components/Animation.js"})]})},Q=k;export{k as PublicAnimationExample,Q as default};
