import{a as c,j as a}from"./index-a2d43e44.js";import{r as s}from"./vendor-8535c4d4.js";import{F as L}from"./FilterUpdateType-b92c7746.js";import{T as F,P,a as j}from"./PublicTableauInfoFooter-d997c1ee.js";import{B as U}from"./Button-571cc965.js";import{I as _}from"./InputRangeField-cd88e302.js";import"./index-d89c3b09.js";import"./RoutesContent-1e33ceb2.js";import"./TailwindTypography-b35f1bda.js";const v="https://public.tableau.com/views/AnimationDashboard_15616567350970/Sheet1",n={ACTIVE:"active",DISABLED:"disabled",PROCESSING:"processing"},l={min:500,max:5e3},p=1e3,V=(r=0,m=10,i=1)=>Array.from(Array.from(Array(Math.ceil((m-r+1)/i)).keys()),o=>r+o*i),u=V(1960,2011),Y=u[u.length-1],k="w-36",O=()=>{const r=s.useRef(),m=s.useRef(null),[i,o]=s.useState(n.DISABLED),f=s.useRef(),[E,h]=s.useState(p),[b,I]=s.useState(p),A=s.useRef(p),g=async()=>{const t=m.current;if(!t)return;if(r.current)return r.current;const e=await t.workbook.activateSheetAsync("Sheet 1");return r.current=e,e},x=async(t,e)=>{t&&(e=e??await g(),e&&await e.applyFilterAsync("Year",[`${t}`],L.Replace))},R=async t=>{const e=t!==j.READY?n.DISABLED:n.ACTIVE;o(e)},N=t=>{const{valueAsNumber:e}=t.currentTarget;h(e)},y=t=>{const{valueAsNumber:e}=t.target,d=e<l.min?l.min:e>l.max?l.max:e;h(d),I(d),A.current=d},S=()=>{const t=f.current;t&&(clearInterval(t),o(n.ACTIVE))},C=async()=>{o(n.PROCESSING);const t=await g();let e=u[0];f.current=setInterval(async()=>{await x(e,t),e===Y&&S(),e++},A.current)},w=(t=!1)=>()=>{if(t){S();return}C()},B=i!==n.ACTIVE,D=i===n.DISABLED,T=i===n.PROCESSING;return c("div",{className:"flex flex-col items-center w-full space-y-3",children:[c("div",{className:"flex gap-3 items-center",children:[a("span",{className:"font-bold",children:"ui status:"})," ",a("span",{children:i})]}),c("div",{className:"flex flex-col gap-3 items-center",children:[a(_,{label:"Animation Timer",name:"width",value:E,onChange:N,onBlur:y,className:k,min:l.min,max:l.max,step:10,disabled:B}),c("div",{className:"flex gap-3 items-center",children:[a("span",{children:`Timer value in use: ${b} (ms)`}),a(U,{disabled:D,onClick:w(T),children:T?"Stop":"Start"})]})]}),a("div",{className:"flex justify-center h-[600px] min-w-[800px]",children:a(F,{ref:m,viewUrl:v,onStatusChange:R,filters:[{field:"Year",value:`${u[0]}`}]})}),a("div",{className:"flex gap-3 items-center",children:"Years range: 1960 until 2011"}),a("div",{className:"flex gap-3 items-center",children:c("div",{children:[a("span",{className:"font-bold",children:"NOTE:"})," ",a("span",{children:"This"})," ",a("span",{className:"italic",children:"animation"})," ",c("span",{children:["runs by incremeting the Year filter on the defined animation timer ("," ",`${b} ms`," )."]})]})}),a(P,{tableauUrl:v,label:"Animation",githubProfileAccount:"andre347",githubProfileAccountUrl:"https://github.com/andre347",githubRepo:"tableau-react-jsapi",githubRepoUrl:"https://github.com/andre347/tableau-react-jsapi",url:"https://react-tableau-jsapi.vercel.app/animation",code:"https://github.com/andre347/tableau-react-jsapi/blob/master/src/components/Animation.js"})]})},Q=O;export{O as PublicAnimationExample,Q as default};
